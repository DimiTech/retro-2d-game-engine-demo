{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app/infrastructure/Canvas.ts","webpack:///./src/main.ts","webpack:///./src/app/infrastructure/Game.ts","webpack:///./src/app/peripherals/Mouse.ts","webpack:///./src/app/domain/Grid.ts","webpack:///./src/app/domain/Map.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CONFIG","canvas","document","getElementById","width","CANVAS_WIDTH","height","CANVAS_HEIGHT","style","SCALE","context","getContext","default","[object Object]","box","strokeStyle","color","lineWidth","beginPath","moveTo","col","TILE_SIZE","row","lineTo","stroke","x","y","canvasX","offsetLeft","canvasY","offsetTop","offsetX","offsetY","clearRect","start","Canvas_1","Mouse_1","Grid_1","Map_1","mouse","grid","map","window","requestAnimationFrame","this","gameLoop","render","clear","draw","hijackRightClick","activateCrosshair","addEventListener","arguments","preventDefault","getCanvasDomElement","e","pageX","pageY","drawCrosshair","rows","cols","Map01","boxes","loadMap","forEach","drawBox","length","console","error","Error","Math","floor","push"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import * as CONFIG from '@app/configuration/config.json'\n\nimport Box from './objects/primitives/Box'\n\nconst canvas = <HTMLCanvasElement> document.getElementById('canvas')\ncanvas.width  = CONFIG.CANVAS_WIDTH\ncanvas.height = CONFIG.CANVAS_HEIGHT\ncanvas.style.width  = CONFIG.SCALE !== 1 ? (CONFIG.SCALE * CONFIG.CANVAS_WIDTH ) + 'px' : 'auto'\ncanvas.style.height = CONFIG.SCALE !== 1 ? (CONFIG.SCALE * CONFIG.CANVAS_HEIGHT) + 'px' : 'auto'\nconst context = canvas.getContext('2d')\n\nexport default class Canvas {\n  public static drawBox(box: Box): void {\n    context.strokeStyle = box.color\n    context.lineWidth = 1\n    context.beginPath()\n      // Draw box outline\n      context.moveTo( 0.5 + box.col * CONFIG.TILE_SIZE,                     0.5 + box.row * CONFIG.TILE_SIZE)\n      context.lineTo(-0.5 + box.col * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE,  0.5 + box.row * CONFIG.TILE_SIZE)\n      context.lineTo(-0.5 + box.col * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE, -0.5 + box.row * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE)\n      context.lineTo( 0.5 + box.col * CONFIG.TILE_SIZE                   , -0.5 + box.row * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE)\n      context.lineTo( 0.5 + box.col * CONFIG.TILE_SIZE,                     0.5 + box.row * CONFIG.TILE_SIZE)\n\n      // Draw 'x' accross the box\n      context.moveTo( 0.5 + box.col * CONFIG.TILE_SIZE,                     0.5 + box.row * CONFIG.TILE_SIZE)\n      context.lineTo(-0.5 + box.col * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE, -0.5 + box.row * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE)\n      context.moveTo(-0.5 + box.col * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE,  0.5 + box.row * CONFIG.TILE_SIZE)\n      context.lineTo( 0.5 + box.col * CONFIG.TILE_SIZE,                    -0.5 + box.row * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE)\n    context.stroke()\n  }\n\n  public static drawCrosshair(x: number, y: number): void {\n    const canvasX: number = x - canvas.offsetLeft\n    const canvasY: number = y - canvas.offsetTop\n    let offsetX, offsetY\n    context.strokeStyle = '#FFFFFF'\n    context.lineWidth = 0.5\n    context.beginPath()\n      // Top\n      offsetX =  0.5\n      offsetY = -1.5\n      context.moveTo(canvasX + offsetX, canvasY + offsetY)\n      offsetY = -3.5\n      context.lineTo(canvasX + offsetX, canvasY + offsetY)\n\n      // Bottom\n      offsetY = 2.5\n      context.moveTo(canvasX + offsetX, canvasY + offsetY)\n      offsetY = 4.5\n      context.lineTo(canvasX + offsetX, canvasY + offsetY)\n\n      // Left\n      offsetY =  0.5\n      offsetX = -3.5\n      context.moveTo(canvasX + offsetX, canvasY + offsetY)\n      offsetX = -1.5\n      context.lineTo(canvasX + offsetX, canvasY + offsetY)\n\n      // Right\n      offsetX = 2.5\n      context.moveTo(canvasX + offsetX, canvasY + offsetY)\n      offsetX = 4.5\n      context.lineTo(canvasX + offsetX, canvasY + offsetY)\n    context.stroke()\n  }\n\n\tpublic static clear(): void {\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height)\n\t}\n\n  public static getCanvasDomElement(): HTMLCanvasElement {\n    return canvas\n  }\n}\n","import Game from '@app/infrastructure/Game'\n\nconst game: Game = new Game()\ngame.start()\n","import Canvas from '@app/infrastructure/Canvas'\nimport Mouse from '@app/peripherals/Mouse'\nimport Grid from '@app/domain/Grid'\nimport Map from '@app/domain/Map'\n\nconst mouse: Mouse = new Mouse()\nconst grid: Grid = new Grid()\nconst map: Map = new Map(grid)\n\nexport default class Game {\n  public start(): void {\n\t\twindow.requestAnimationFrame(() => this.gameLoop())\n  }\n\n\tprivate gameLoop(): void {\n\t\t// update()\n\t\tthis.render()\n\t\twindow.requestAnimationFrame(() => this.gameLoop())\n\t}\n\n  private render(): void {\n\t  Canvas.clear()\n    map.draw()\n\t\tmouse.render()\n  }\n}\n","import Canvas from '@app/infrastructure/Canvas'\n\nexport default class Mouse {\n\tx: number = 0\n\ty: number = 0\n\n  constructor() {\n    this.hijackRightClick()\n    this.activateCrosshair()\n  }\n\n  private hijackRightClick(): void {\n    window.addEventListener('contextmenu', function() {\n      arguments[0].preventDefault()\n    }, false)\n  }\n\n  private activateCrosshair(): void {\n    const canvas: HTMLCanvasElement = Canvas.getCanvasDomElement()\n    canvas.addEventListener('mousemove', e => {\n\t\t\tthis.x = e.pageX\n\t\t\tthis.y = e.pageY\n    }, false)\n  }\n\n\tpublic render(): void {\n\t\tCanvas.drawCrosshair(this.x, this.y)\n\t}\n}\n","import * as CONFIG from '@app/configuration/config.json'\n\nexport default class Grid {\n  rows: number = CONFIG.CANVAS_HEIGHT / CONFIG.TILE_SIZE\n  cols: number = CONFIG.CANVAS_WIDTH  / CONFIG.TILE_SIZE\n}\n","import Grid from '@app/domain/Grid'\n\nimport Canvas from '@app/infrastructure/Canvas'\nimport Box from '@app/infrastructure/objects/primitives/Box'\n\nimport * as Map01 from '@app/resources/maps/Map-01.json'\n\nexport default class Map {\n  private boxes: Box[] = []\n\n  constructor(private grid: Grid) {\n    this.loadMap(Map01)\n  }\n\n  public draw(): void {\n    this.boxes.forEach((box: Box) => {\n      Canvas.drawBox(box)\n    })\n  }\n\n  private loadMap(map: number[]): void {\n    if (this.grid.rows * this.grid.cols !== map.length) {\n      console.error(`Expected - columns: ${this.grid.cols}, rows: ${this.grid.rows}`)\n      throw new Error(`Invalid Map file: ${map}`)\n    }\n\n    let row: number, col: number\n    for (let i = 0; i < map.length; ++i) {\n      col = i % this.grid.cols\n      row = Math.floor(i / this.grid.cols)\n      switch (map[i]) {\n        case 1:\n          this.boxes.push({\n            color: '#572F17',\n            col,\n            row\n          })\n          break\n        case 2:\n          this.boxes.push({\n            color: '#403550',\n            col,\n            row\n          })\n          break\n        case 3:\n          this.boxes.push({\n            color: '#27531B',\n            col,\n            row\n          })\n          break\n      }\n    }\n  }\n}\n"],"sourceRoot":""}