!function(t){var e={};function o(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=6)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(1),i=o(8),s=o(3),n=document.getElementById("canvas");n.width=a.CANVAS_WIDTH,n.height=a.CANVAS_HEIGHT,n.style.width=1!==a.SCALE?a.SCALE*a.CANVAS_WIDTH+"px":"auto",n.style.height=1!==a.SCALE?a.SCALE*a.CANVAS_HEIGHT+"px":"auto",e.context=n.getContext("2d");class l{static clear(){e.context.clearRect(0,0,n.width,n.height)}static drawBox(t){e.context.strokeStyle=t.color,e.context.lineWidth=1,e.context.beginPath(),e.context.moveTo(.5+t.x,.5+t.y),e.context.lineTo(-.5+t.x+a.TILE_SIZE,.5+t.y),e.context.lineTo(-.5+t.x+a.TILE_SIZE,-.5+t.y+a.TILE_SIZE),e.context.lineTo(.5+t.x,-.5+t.y+a.TILE_SIZE),e.context.lineTo(.5+t.x,.5+t.y),e.context.moveTo(.5+t.x,.5+t.y),e.context.lineTo(-.5+t.x+a.TILE_SIZE,-.5+t.y+a.TILE_SIZE),e.context.moveTo(-.5+t.x+a.TILE_SIZE,.5+t.y),e.context.lineTo(.5+t.x,-.5+t.y+a.TILE_SIZE),e.context.stroke()}static calculateTheta(t){const o=Math.atan2(this.getCanvasMouseY()-this.center.y,this.getCanvasMouseX()-this.center.x);return e.context.fillStyle="#44FF44",e.context.fillText(`Î¸ = ${o}`,10,56),o}static drawPlayer(t,o){e.context.beginPath(),e.context.fillStyle="#00AA00",e.context.font="10px Monospace",e.context.fillText(`p (${t.x}, ${t.y})`,10,20),e.context.strokeStyle="#523DA5",e.context.lineWidth=2,e.context.moveTo(this.center.x,this.center.y),e.context.lineTo(this.center.x+t.sightLineLength*Math.cos(o),this.center.y+t.sightLineLength*Math.sin(o)),e.context.stroke()}static drawCrosshair(){const t=l.getCanvasMouseX(),o=l.getCanvasMouseY();let a,i;e.context.strokeStyle="#FFFFFF",e.context.lineWidth=.5,e.context.beginPath(),a=.5,i=-1.5,e.context.moveTo(t+a,o+i),i=-3.5,e.context.lineTo(t+a,o+i),i=2.5,e.context.moveTo(t+a,o+i),i=4.5,e.context.lineTo(t+a,o+i),i=.5,a=-3.5,e.context.moveTo(t+a,o+i),a=-1.5,e.context.lineTo(t+a,o+i),a=2.5,e.context.moveTo(t+a,o+i),a=4.5,e.context.lineTo(t+a,o+i),e.context.stroke()}static drawPlayerVisionRay(t,e){const{hitPoint:o,hitObject:a}=i.default.cast(t,e);o&&(a?this.drawRay(o,"#FF4444"):this.drawRay(o))}static drawProjectiles(t,o,a){e.context.fillStyle="#FFFFFF",e.context.lineWidth=1,t.forEach(t=>{e.context.beginPath(),e.context.arc(t.x+this.center.x-o,t.y+this.center.y-a,2,0,2*Math.PI),e.context.stroke()})}static drawRay(t,o="#4444FF"){e.context.strokeStyle=o,e.context.lineWidth=.5,e.context.beginPath(),e.context.moveTo(this.center.x,this.center.y),e.context.lineTo(this.center.x+t.x,this.center.y+t.y),e.context.stroke(),e.context.lineWidth=1}}l.rows=Math.floor(n.height/a.TILE_SIZE),l.cols=Math.floor(n.width/a.TILE_SIZE),l.halfRows=Math.floor(n.height/2/a.TILE_SIZE),l.halfCols=Math.floor(n.width/2/a.TILE_SIZE),l.rowRemainder=n.height/2%a.TILE_SIZE,l.colRemainder=n.width/2%a.TILE_SIZE,l.center={x:a.CANVAS_WIDTH/2,y:a.CANVAS_HEIGHT/2},l.getCanvasDomElement=(()=>n),l.getCanvasMouseX=(()=>Math.floor((s.default.x-n.offsetLeft)/a.SCALE)),l.getCanvasMouseY=(()=>Math.floor((s.default.y-n.offsetTop)/a.SCALE)),e.default=l},function(t){t.exports={CANVAS_WIDTH:480,CANVAS_HEIGHT:320,TILE_SIZE:32,SCALE:2,RAYCASTER:{DEBUG:!1}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(1),i=o(0),s=o(9),n=o(12);e.gameObjects=[];e.default=class{constructor(t,e){this.grid=t,this.player=e,this.loadMap(n)}draw(){let t=this.player.deltas.dxLeft-i.default.colRemainder,o=this.player.deltas.dyTop-i.default.rowRemainder;const s=this.player.row-i.default.halfRows,n=this.player.col-i.default.halfCols;let l;for(let c=s;c<s+i.default.rows+1;++c)for(let r=n-1;r<n+i.default.cols+1;++r)e.gameObjects[c]&&e.gameObjects[c][r]&&((l=e.gameObjects[c][r]).x=(r-n)*a.TILE_SIZE-t,l.y=(c-s)*a.TILE_SIZE-o,l.draw())}loadMap(t){for(let o=0;o<t.length;++o){e.gameObjects[o]=[];for(let a=0;a<t[o].length;++a)switch(t[o][a]){case 1:e.gameObjects[o][a]=s.default.createBox("#4B4B4B",o,a,!1);break;case 2:e.gameObjects[o][a]=s.default.createBox("#27531B",o,a);break;case 3:e.gameObjects[o][a]=s.default.createBox("#572F17",o,a);break;default:e.gameObjects[o][a]=null}}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(0);class i{static init(t){this.hijackRightClick(),this.trackMouseOnCanvas(),this.listenForLeftClicks(t)}static hijackRightClick(){window.addEventListener("contextmenu",t=>{t.preventDefault()},!1)}static trackMouseOnCanvas(){a.default.getCanvasDomElement().addEventListener("mousemove",t=>{this.x=t.pageX,this.y=t.pageY},!1)}static listenForLeftClicks(t){const e=a.default.getCanvasDomElement();e.addEventListener("mousedown",e=>{t.setShooting(!0)},!1),e.addEventListener("mouseup",e=>{t.setShooting(!1)},!1)}}i.x=0,i.y=0,e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(17),i=o(5),s=o(18);class n{static async load(){this.SMG[0]=await s.load("./audio/smg_1.wav"),this.SMG[1]=await s.load("./audio/smg_2.wav"),this.SMG[2]=await s.load("./audio/smg_3.wav"),this.SMG[3]=await s.load("./audio/smg_4.wav"),this.SMG[4]=await s.load("./audio/smg_5.wav")}static playSMG(){const t=i.default.createBufferSource();t.buffer=this.SMG[this.SMG_INDEX];const e=i.default.createGain();e.gain.value=a.default.soundFxVolume,t.connect(e),e.connect(i.default.destination),t.start(),this.SMG_INDEX=++this.SMG_INDEX%this.SMG.length}}n.SMG=[],n.SMG_INDEX=0,e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=new AudioContext;e.default=a},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(new(o(7).default)).start()},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(0),i=o(3),s=o(13),n=o(14),l=o(2),c=o(15);o(19).default.load();const r=new n.default,h=new c.default(128,64),d=new l.default(r,h);s.default.init(h),i.default.init(h);e.default=class{start(){window.requestAnimationFrame(()=>this.gameLoop())}gameLoop(){this.update(),this.render(),window.requestAnimationFrame(()=>this.gameLoop())}update(){h.update()}render(){a.default.clear(),d.draw(),h.draw()}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(1),i=o(2),s=o(0);class n{static cast(t,e){if(!(e>=0)){t.deltas.dyTop;const o=t.deltas.dyTop/Math.tan(-e),a=1/o>0;return o>=0&&a?n.getInterceptPointNE(t,e):n.getInterceptPointNW(t,e)}{t.deltas.dyBottom;const o=t.deltas.dyBottom/Math.tan(e);if(o>=0)return n.getInterceptPointSE(t,e);if(o<0)return n.getInterceptPointSW(t,e)}}static getInterceptPointSE(t,e){let o,i,l=null,c=null,r=0;for(;i=r*a.TILE_SIZE,o=0===e?0:(t.deltas.dxRight+i)*Math.tan(e),!(i+t.deltas.dxRight>s.default.center.x||o>s.default.center.y);){if(a.RAYCASTER.DEBUG&&(s.context.beginPath(),s.context.arc(s.default.center.x+t.deltas.dxRight+i,s.default.center.y+o,2,0,2*Math.PI),s.context.stroke()),c=n.checkGameObjectCollisionVerticalSE(r,t,o)){l={x:i+t.deltas.dxRight,y:o};break}++r}let h,d,u=null,f=null,x=0;for(;!(d=x*a.TILE_SIZE,0===e||(h=(t.deltas.dyBottom+d)/Math.tan(e),d+t.deltas.dyBottom>s.default.center.y||h>s.default.center.x)||(a.RAYCASTER.DEBUG&&(s.context.strokeStyle="#44FF44",s.context.beginPath(),s.context.arc(s.default.center.x+h,s.default.center.y+t.deltas.dyBottom+d,2,0,2*Math.PI),s.context.stroke()),o<d));){if(f=n.checkGameObjectCollisionHorizontalSE(x,t,h)){u={x:h,y:d+t.deltas.dyBottom};break}++x}if(l&&null===u)return{hitPoint:l,hitObject:c};if(u&&null===l)return{hitPoint:u,hitObject:f};if(u&&l){return Math.sqrt(Math.pow(l.x,2)+Math.pow(l.y,2))>Math.sqrt(Math.pow(u.x,2)+Math.pow(u.y,2))?{hitPoint:u,hitObject:f}:{hitPoint:l,hitObject:c}}if(null===u&&null===l){const e={x:h,y:d+t.deltas.dyBottom},a={x:i+t.deltas.dxRight,y:o};return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))>Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))?{hitPoint:e,hitObject:f}:{hitPoint:a,hitObject:c}}}static getInterceptPointNE(t,e){let o,i,l=null,c=null,r=0;for(;i=r*a.TILE_SIZE,o=0===e?0:(t.deltas.dxRight+i)*Math.tan(-e),!(i+t.deltas.dxRight>s.default.center.x||o>s.default.center.y);){if(a.RAYCASTER.DEBUG&&(s.context.beginPath(),s.context.arc(s.default.center.x+i+t.deltas.dxRight,s.default.center.y-o,2,0,2*Math.PI),s.context.stroke()),c=n.checkGameObjectCollisionVerticalNE(r,t,o)){l={x:i+t.deltas.dxRight,y:-o};break}++r}let h,d,u=null,f=null,x=0;for(;!(d=x*a.TILE_SIZE,0===e||(h=(t.deltas.dyTop+d)/Math.tan(-e),d+t.deltas.dyTop>s.default.center.y||h>s.default.center.x)||(a.RAYCASTER.DEBUG&&(s.context.strokeStyle="#44FF44",s.context.beginPath(),s.context.arc(s.default.center.x+h,s.default.center.y-d-t.deltas.dyTop,2,0,2*Math.PI),s.context.stroke()),o<d));){if(f=n.checkGameObjectCollisionHorizontalNE(x,t,h)){u={x:h,y:-d-t.deltas.dyTop};break}++x}if(l&&null===u)return{hitPoint:l,hitObject:c};if(u&&null===l)return{hitPoint:u,hitObject:f};if(u&&l){return Math.sqrt(Math.pow(l.x,2)+Math.pow(l.y,2))>Math.sqrt(Math.pow(u.x,2)+Math.pow(u.y,2))?{hitPoint:u,hitObject:f}:{hitPoint:l,hitObject:c}}if(null===u&&null===l){const e={x:h,y:-d-t.deltas.dyTop},a={x:i+t.deltas.dxRight,y:-o};return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))>Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))?{hitPoint:e,hitObject:f}:{hitPoint:a,hitObject:c}}}static getInterceptPointNW(t,e){let o,i,l=null,c=null,r=0;for(;i=r*a.TILE_SIZE,o=0===e?0:(t.deltas.dxLeft+i)*Math.tan(Math.PI- -e),!(i+t.deltas.dxLeft>s.default.center.x||o>s.default.center.y);){if(a.RAYCASTER.DEBUG&&(s.context.beginPath(),s.context.arc(s.default.center.x-i-t.deltas.dxLeft,s.default.center.y-o,2,0,2*Math.PI),s.context.stroke()),c=n.checkGameObjectCollisionVerticalNW(r,t,o)){l={x:-i-t.deltas.dxLeft,y:-o};break}++r}let h,d,u=null,f=null,x=0;for(;!(d=x*a.TILE_SIZE,0===e||(h=(t.deltas.dyTop+d)/Math.tan(Math.PI- -e),d+t.deltas.dyTop>s.default.center.y||h>s.default.center.x)||(a.RAYCASTER.DEBUG&&(s.context.strokeStyle="#44FF44",s.context.beginPath(),s.context.arc(s.default.center.x-h,s.default.center.y-d-t.deltas.dyTop,2,0,2*Math.PI),s.context.stroke()),o<d));){if(f=n.checkGameObjectCollisionHorizontalNW(x,t,h)){u={x:-h,y:-d-t.deltas.dyTop};break}++x}if(l&&null===u)return{hitPoint:l,hitObject:c};if(u&&null===l)return{hitPoint:u,hitObject:f};if(u&&l){return Math.sqrt(Math.pow(l.x,2)+Math.pow(l.y,2))>Math.sqrt(Math.pow(u.x,2)+Math.pow(u.y,2))?{hitPoint:u,hitObject:f}:{hitPoint:l,hitObject:c}}if(null===u&&null===l){const e={x:-h,y:-d-t.deltas.dyTop},a={x:-i-t.deltas.dxLeft,y:-o};return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))>Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))?{hitPoint:e,hitObject:f}:{hitPoint:a,hitObject:c}}}static getInterceptPointSW(t,e){let o,i,l=null,c=null,r=0;for(;i=r*a.TILE_SIZE,o=0===e?0:(t.deltas.dxLeft+i)*Math.tan(Math.PI-e),!(i+t.deltas.dxLeft>s.default.center.x||o>s.default.center.y);){if(a.RAYCASTER.DEBUG&&(s.context.beginPath(),s.context.arc(s.default.center.x-t.deltas.dxLeft-i,s.default.center.y+o,2,0,2*Math.PI),s.context.stroke()),c=n.checkGameObjectCollisionVerticalSW(r,t,o)){l={x:-i-t.deltas.dxLeft,y:o};break}++r}let h,d,u=null,f=null,x=0;for(;!(d=x*a.TILE_SIZE,0===e||(h=(t.deltas.dyBottom+d)/Math.tan(e),d+t.deltas.dyBottom>s.default.center.y||-h>s.default.center.x)||(a.RAYCASTER.DEBUG&&(s.context.strokeStyle="#44FF44",s.context.beginPath(),s.context.arc(s.default.center.x+h,s.default.center.y+t.deltas.dyBottom+d,2,0,2*Math.PI),s.context.stroke()),o<d));){if(f=n.checkGameObjectCollisionHorizontalSW(x,t,h)){u={x:h,y:d+t.deltas.dyBottom};break}++x}if(l&&null===u)return{hitPoint:l,hitObject:c};if(u&&null===l)return{hitPoint:u,hitObject:f};if(u&&l){return Math.sqrt(Math.pow(l.x,2)+Math.pow(l.y,2))>Math.sqrt(Math.pow(u.x,2)+Math.pow(u.y,2))?{hitPoint:u,hitObject:f}:{hitPoint:l,hitObject:c}}if(null===u&&null===l){const e={x:h,y:d+t.deltas.dyBottom},a={x:-i-t.deltas.dxLeft,y:o};return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))>Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))?{hitPoint:e,hitObject:f}:{hitPoint:a,hitObject:c}}}static checkGameObjectCollisionVerticalSE(t,e,o){const n=1+e.col+t,l=e.row+Math.floor((e.deltas.dyTop+o)/a.TILE_SIZE);let c=null;return i.gameObjects[l]&&i.gameObjects[l][n]&&(c=i.gameObjects[l][n]),a.RAYCASTER.DEBUG&&s.context.fillText(`col: ${n}, row: ${l}, hit: ${c?[c.row,c.col]:null}`,10,112+12*t),c}static checkGameObjectCollisionHorizontalSE(t,e,o){const n=e.col+Math.floor((e.deltas.dxLeft+o)/a.TILE_SIZE),l=e.row+t+1;let c=null;return i.gameObjects[l]&&i.gameObjects[l][n]&&(c=i.gameObjects[l][n]),a.RAYCASTER.DEBUG&&s.context.fillText(`col: ${n}, row: ${l}, hit: ${c?[c.row,c.col]:null}`,10,212+12*t),c}static checkGameObjectCollisionVerticalNE(t,e,o){const n=1+e.col+t,l=e.row+Math.floor((e.deltas.dyTop-o)/a.TILE_SIZE);let c=null;return i.gameObjects[l]&&i.gameObjects[l][n]&&(c=i.gameObjects[l][n]),a.RAYCASTER.DEBUG&&s.context.fillText(`col: ${n}, row: ${l}, hit: ${c?[c.row,c.col]:null}`,10,112+12*t),c}static checkGameObjectCollisionHorizontalNE(t,e,o){const n=e.col+Math.floor((e.deltas.dxLeft+o)/a.TILE_SIZE),l=e.row-t-1;let c=null;return i.gameObjects[l]&&i.gameObjects[l][n]&&(c=i.gameObjects[l][n]),a.RAYCASTER.DEBUG&&s.context.fillText(`col: ${n}, row: ${l}, hit: ${c?[c.row,c.col]:null}`,10,212+12*t),c}static checkGameObjectCollisionVerticalNW(t,e,o){const n=-1+e.col-t,l=e.row+Math.floor((e.deltas.dyTop-o)/a.TILE_SIZE);let c=null;return i.gameObjects[l]&&i.gameObjects[l][n]&&(c=i.gameObjects[l][n]),a.RAYCASTER.DEBUG&&s.context.fillText(`col: ${n}, row: ${l}, hit: ${c?[c.row,c.col]:null}`,10,112+12*t),c}static checkGameObjectCollisionHorizontalNW(t,e,o){const n=e.col-Math.floor((e.deltas.dxRight+o)/a.TILE_SIZE),l=e.row-t-1;let c=null;return i.gameObjects[l]&&i.gameObjects[l][n]&&(c=i.gameObjects[l][n]),a.RAYCASTER.DEBUG&&s.context.fillText(`col: ${n}, row: ${l}, hit: ${c?[c.row,c.col]:null}`,10,212+12*t),c}static checkGameObjectCollisionVerticalSW(t,e,o){const n=e.col-t-1,l=e.row+Math.floor((e.deltas.dyTop+o)/a.TILE_SIZE);let c=null;return i.gameObjects[l]&&i.gameObjects[l][n]&&(c=i.gameObjects[l][n]),a.RAYCASTER.DEBUG&&s.context.fillText(`col: ${n}, row: ${l}, hit: ${c?[c.row,c.col]:null}`,10,112+12*t),c}static checkGameObjectCollisionHorizontalSW(t,e,o){const n=e.col-Math.floor((e.deltas.dxRight-o)/a.TILE_SIZE),l=e.row+t+1;let c=null;return i.gameObjects[l]&&i.gameObjects[l][n]&&(c=i.gameObjects[l][n]),a.RAYCASTER.DEBUG&&s.context.fillText(`col: ${n}, row: ${l}, hit: ${c?[c.row,c.col]:null}`,10,212+12*t),c}}e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(1),i=o(10);e.default=class{static createBox(t,e,o,s=!0){return new i.default(t,e,o,a.TILE_SIZE,a.TILE_SIZE,s)}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(0),i=o(11);e.default=class extends i.default{draw(){a.default.drawBox(this)}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(1);e.default=class{constructor(t,e,o,i,s,n=!0){this.color=t,this.row=e,this.col=o,this.width=i,this.height=s,this.destructable=n,this.mapX=o*a.TILE_SIZE,this.mapY=e*a.TILE_SIZE}}},function(t){t.exports=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1],[1,0,3,0,0,0,0,0,0,0,1,0,2,3,0,1,0,0,0,0,0,1],[1,0,0,3,0,0,0,0,0,0,1,0,2,2,0,1,0,0,3,2,0,1],[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,1],[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,0,0,0,1],[1,0,0,0,0,0,3,3,3,0,2,0,0,0,0,1,0,3,2,2,0,1],[1,0,0,0,0,0,3,3,3,0,2,0,0,0,0,1,0,0,0,0,0,1],[1,0,1,0,0,0,3,3,3,0,2,0,0,1,0,1,0,0,0,1,0,1],[1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,1,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{static init(t){document.addEventListener("keydown",e=>{switch(e.keyCode){case 87:t.moving.up=!0;break;case 65:t.moving.left=!0;break;case 83:t.moving.down=!0;break;case 68:t.moving.right=!0}}),document.addEventListener("keyup",e=>{switch(e.keyCode){case 87:t.moving.up=!1;break;case 65:t.moving.left=!1;break;case 83:t.moving.down=!1;break;case 68:t.moving.right=!1}})}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(1);e.default=class{constructor(){this.rows=a.CANVAS_HEIGHT/a.TILE_SIZE,this.cols=a.CANVAS_WIDTH/a.TILE_SIZE}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(1),i=o(0),s=o(16),n=o(2),l=o(4);e.default=class{constructor(t,e){this.x=t,this.y=e,this.rotation=0,this.moving={left:!1,right:!1,up:!1,down:!1},this.sightLineLength=10,this.deltas={dyTop:0,dyBottom:0,dxLeft:0,dxRight:0},this.maxSpeed=4,this.shooting=!1,this.shootingCooldown=6,this.projectiles=[],this.updateMapPosition()}update(){this.move(),this.updateTileDeltas(),this.shoot(),this.projectiles.forEach((t,e)=>{t.update(this.x,this.y),!1===t.alive&&this.projectiles.splice(e,1)})}move(){this.moving.left&&(this.x-=this.maxSpeed),this.moving.right&&(this.x+=this.maxSpeed),this.moving.up&&(this.y-=this.maxSpeed),this.moving.down&&(this.y+=this.maxSpeed),this.adjustCollisionWithGameObjects(),this.updateMapPosition()}shoot(){if(this.shooting&&this.shootingCooldown<=0){const t=i.default.getCanvasMouseX(),e=i.default.getCanvasMouseY(),o=t-i.default.center.x,a=e-i.default.center.y;let n=o/(Math.abs(o)+Math.abs(a)),c=a/(Math.abs(o)+Math.abs(a));const r=.1*Math.random()-.05,h=.1*Math.random()-.05;n+=r,c+=h,this.projectiles.push(new s.default(this.x,this.y,n,c)),this.shootingCooldown=6,l.default.playSMG()}else--this.shootingCooldown}draw(){const t=i.default.calculateTheta(this);i.default.drawPlayer(this,t),i.default.drawPlayerVisionRay(this,t),i.default.drawCrosshair(),i.default.drawProjectiles(this.projectiles,this.x,this.y)}setShooting(t){this.shooting=t}updateMapPosition(){this.row=Math.floor(this.y/a.TILE_SIZE),this.col=Math.floor(this.x/a.TILE_SIZE)}updateTileDeltas(){this.deltas.dyTop=this.y%a.TILE_SIZE,this.deltas.dyBottom=a.TILE_SIZE-this.deltas.dyTop,this.deltas.dxLeft=this.x%a.TILE_SIZE,this.deltas.dxRight=a.TILE_SIZE-this.deltas.dxLeft}adjustCollisionWithGameObjects(){let t;n.gameObjects[this.row]&&((t=n.gameObjects[this.row][this.col-1])&&this.x<=t.mapX+t.width&&(this.x=t.mapX+t.width+1),(t=n.gameObjects[this.row][this.col+1])&&this.x>=t.mapX&&(this.x=t.mapX-1)),n.gameObjects[this.row-1]&&((t=n.gameObjects[this.row-1][this.col])&&this.y<=t.mapY+t.height&&(this.y=t.mapY+t.height+1),(t=n.gameObjects[this.row-1][this.col+1])&&this.y<=t.mapY+t.height&&this.x>=t.mapX&&(this.y=t.mapY+t.height+1),(t=n.gameObjects[this.row-1][this.col-1])&&this.y<=t.mapY+t.height&&this.x<=t.mapX+t.width&&(this.y=t.mapY+t.height+1)),n.gameObjects[this.row+1]&&((t=n.gameObjects[this.row+1][this.col])&&this.y>=t.mapY&&(this.y=t.mapY-1),(t=n.gameObjects[this.row+1][this.col+1])&&this.x>=t.mapX&&this.y>=t.mapY&&(this.y=t.mapY-1),(t=n.gameObjects[this.row+1][this.col-1])&&this.x<=t.mapX+t.width&&this.y>=t.mapY&&(this.y=t.mapY-1))}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(0),i=o(2);e.default=class{constructor(t,e,o,a){this.x=t,this.y=e,this.directionX=o,this.directionY=a,this.speed=24,this.alive=!0}update(t,e){let o;this.x+=this.directionX*this.speed,this.y+=this.directionY*this.speed,(this.x<t-a.default.center.x||this.x>t+a.default.center.x||this.y<e-a.default.center.y||this.y>e+a.default.center.y)&&(this.alive=!1);for(let t=0;t<i.gameObjects.length;++t)for(let e=0;e<i.gameObjects[t].length;++e)(o=i.gameObjects[t][e])&&this.x>=o.mapX&&this.x<=o.mapX+o.width&&this.y>=o.mapY&&this.y<=o.mapY+o.height&&(this.alive=!1,i.gameObjects[t][e].destructable&&(i.gameObjects[t][e]=null))}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class a{static get musicVolume(){return this._musicVolume}static set musicVolume(t){t>=0&&t<=1&&(this._musicVolume=t)}static get soundFxVolume(){return this._soundFxVolume}static set soundFxVolume(t){t>=0&&t<=1&&(this._soundFxVolume=t)}}a._musicVolume=.3,a._soundFxVolume=.3,e.default=a},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(5);e.load=function(t){return new Promise((e,o)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=(()=>{a.default.decodeAudioData(i.response,t=>e(t))}),i.send()})}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=o(4);e.default=class{static async load(){await a.default.load()}}}]);
//# sourceMappingURL=app.js.map