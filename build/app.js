!function(e){var t={};function o(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(1),s=o(4),r=document.getElementById("canvas");r.width=i.CANVAS_WIDTH,r.height=i.CANVAS_HEIGHT,r.style.width=1!==i.SCALE?i.SCALE*i.CANVAS_WIDTH+"px":"auto",r.style.height=1!==i.SCALE?i.SCALE*i.CANVAS_HEIGHT+"px":"auto";const n=r.getContext("2d");t.default=class{static clear(){n.clearRect(0,0,r.width,r.height)}static drawBox(e){n.strokeStyle=e.color,n.lineWidth=1,n.beginPath(),n.moveTo(.5+e.col*i.TILE_SIZE,.5+e.row*i.TILE_SIZE),n.lineTo(e.col*i.TILE_SIZE-.5+i.TILE_SIZE,.5+e.row*i.TILE_SIZE),n.lineTo(e.col*i.TILE_SIZE-.5+i.TILE_SIZE,e.row*i.TILE_SIZE-.5+i.TILE_SIZE),n.lineTo(.5+e.col*i.TILE_SIZE,e.row*i.TILE_SIZE-.5+i.TILE_SIZE),n.lineTo(.5+e.col*i.TILE_SIZE,.5+e.row*i.TILE_SIZE),n.moveTo(.5+e.col*i.TILE_SIZE,.5+e.row*i.TILE_SIZE),n.lineTo(e.col*i.TILE_SIZE-.5+i.TILE_SIZE,e.row*i.TILE_SIZE-.5+i.TILE_SIZE),n.moveTo(e.col*i.TILE_SIZE-.5+i.TILE_SIZE,.5+e.row*i.TILE_SIZE),n.lineTo(.5+e.col*i.TILE_SIZE,e.row*i.TILE_SIZE-.5+i.TILE_SIZE),n.stroke()}static drawPlayer(e){n.beginPath(),n.fillStyle="#00AA00",n.font="10px Monospace",n.fillText(`p (${e.x}, ${e.y})`,50,50);const t=s.default.x-r.offsetLeft,o=s.default.y-r.offsetTop;n.fillText(`m (${t}, ${o})`,50,62);const i=t-e.x,a=o-e.y;n.fillText(`d (${i}, ${a})`,50,74);const l=Math.atan2(a,i);n.fillText(`Î¸ = ${l}`,50,86),n.strokeStyle="#EF0000",n.lineWidth=2,n.moveTo(e.x,e.y),n.lineTo(e.x+e.rayLengthShort*Math.cos(l),e.y+e.rayLengthShort*Math.sin(l)),n.stroke()}static drawCrosshair(){const e=s.default.x-r.offsetLeft,t=s.default.y-r.offsetTop;let o,i;n.strokeStyle="#FFFFFF",n.lineWidth=.5,n.beginPath(),o=.5,i=-1.5,n.moveTo(e+o,t+i),i=-3.5,n.lineTo(e+o,t+i),i=2.5,n.moveTo(e+o,t+i),i=4.5,n.lineTo(e+o,t+i),i=.5,o=-3.5,n.moveTo(e+o,t+i),o=-1.5,n.lineTo(e+o,t+i),o=2.5,n.moveTo(e+o,t+i),o=4.5,n.lineTo(e+o,t+i),n.stroke()}static drawPlayerVisionRay(e){const t=s.default.x-r.offsetLeft+.5,o=s.default.y-r.offsetTop+.5;n.strokeStyle="#88FF88",n.lineWidth=.2,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t,o),n.stroke()}static getCanvasDomElement(){return r}}},function(e){e.exports={CANVAS_WIDTH:480,CANVAS_HEIGHT:320,TILE_SIZE:32,SCALE:1}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(new(o(3).default)).start()},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(0),s=o(4),r=o(9),n=o(5),a=o(6),l=o(8),c=new n.default,d=new a.default(c),u=new l.default(100,100);r.default.init(u),s.default.init();t.default=class{start(){window.requestAnimationFrame(()=>this.gameLoop())}gameLoop(){this.update(),this.render(),window.requestAnimationFrame(()=>this.gameLoop())}update(){u.update()}render(){i.default.clear(),d.draw(),u.draw()}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(0);class s{static init(){this.hijackRightClick(),this.trackMouseOnCanvas()}static hijackRightClick(){window.addEventListener("contextmenu",e=>{e.preventDefault()},!1)}static trackMouseOnCanvas(){i.default.getCanvasDomElement().addEventListener("mousemove",e=>{this.x=e.pageX,this.y=e.pageY},!1)}}s.x=0,s.y=0,t.default=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(1);t.default=class{constructor(){this.rows=i.CANVAS_HEIGHT/i.TILE_SIZE,this.cols=i.CANVAS_WIDTH/i.TILE_SIZE}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(0),s=o(7);t.default=class{constructor(e){this.grid=e,this.boxes=[],this.loadMap(s)}draw(){this.boxes.forEach(e=>{i.default.drawBox(e)})}loadMap(e){if(this.grid.rows*this.grid.cols!==e.length)throw console.error(`Expected - columns: ${this.grid.cols}, rows: ${this.grid.rows}`),new Error(`Invalid Map file: ${e}`);let t,o;for(let i=0;i<e.length;++i)switch(o=i%this.grid.cols,t=Math.floor(i/this.grid.cols),e[i]){case 1:this.boxes.push({color:"#572F17",col:o,row:t});break;case 2:this.boxes.push({color:"#403550",col:o,row:t});break;case 3:this.boxes.push({color:"#27531B",col:o,row:t})}}}},function(e){e.exports=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(0);t.default=class{constructor(e,t){this.x=e,this.y=t,this.rotation=0,this.maxSpeed=3,this.moving={left:!1,right:!1,up:!1,down:!1},this.rayLengthShort=10}update(){this.moving.left&&(this.x-=this.maxSpeed),this.moving.right&&(this.x+=this.maxSpeed),this.moving.up&&(this.y-=this.maxSpeed),this.moving.down&&(this.y+=this.maxSpeed)}draw(){i.default.drawPlayer(this),i.default.drawPlayerVisionRay(this),i.default.drawCrosshair()}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static init(e){document.addEventListener("keydown",t=>{switch(t.keyCode){case 87:e.moving.up=!0;break;case 65:e.moving.left=!0;break;case 83:e.moving.down=!0;break;case 68:e.moving.right=!0}}),document.addEventListener("keyup",t=>{switch(t.keyCode){case 87:e.moving.up=!1;break;case 65:e.moving.left=!1;break;case 83:e.moving.down=!1;break;case 68:e.moving.right=!1}})}}}]);
//# sourceMappingURL=app.js.map