{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app/infrastructure/Canvas.ts","webpack:///./src/app/peripherals/Mouse.ts","webpack:///./src/main.ts","webpack:///./src/app/infrastructure/Game.ts","webpack:///./src/app/peripherals/Keyboard.ts","webpack:///./src/app/domain/Grid.ts","webpack:///./src/app/domain/Map.ts","webpack:///./src/app/domain/Player.ts","webpack:///./src/app/domain/Projectile.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CONFIG","Mouse_1","canvas","document","getElementById","width","CANVAS_WIDTH","height","CANVAS_HEIGHT","style","SCALE","context","getContext","Canvas","[object Object]","clearRect","box","strokeStyle","color","lineWidth","beginPath","moveTo","col","TILE_SIZE","row","lineTo","stroke","fillStyle","font","fillText","x","y","canvasX","default","offsetLeft","canvasY","offsetTop","dx","dy","theta","Math","atan2","sightLineLength","cos","sin","offsetX","offsetY","canvasMouseX","getCanvasMouseX","canvasMouseY","getCanvasMouseY","projectiles","forEach","arc","PI","getCanvasDomElement","Canvas_1","Mouse","player","this","hijackRightClick","trackMouseOnCanvas","listenForLeftClicks","window","addEventListener","e","preventDefault","pageX","pageY","setShooting","start","Keyboard_1","Grid_1","Map_1","Player_1","grid","map","init","requestAnimationFrame","gameLoop","update","render","clear","draw","keyCode","moving","up","left","down","right","rows","cols","Map01","boxes","loadMap","drawBox","length","console","error","Error","floor","push","Projectile_1","rotation","maxSpeed","shooting","shootingCooldown","move","shoot","updateProjectiles","xVel","abs","yVel","randomFactorX","random","randomFactorY","directionX","speed","directionY","splice","drawPlayer","drawPlayerVisionRay","drawCrosshair","drawProjectiles","isShooting"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import * as CONFIG from '@app/configuration/config.json'\n\nimport Player from '@app/domain/Player'\nimport Projectile from '@app/domain/Projectile'\nimport Mouse from '@app/peripherals/Mouse'\nimport Box from './objects/primitives/Box'\n\nconst canvas = <HTMLCanvasElement> document.getElementById('canvas')\ncanvas.width  = CONFIG.CANVAS_WIDTH\ncanvas.height = CONFIG.CANVAS_HEIGHT\ncanvas.style.width  = CONFIG.SCALE !== 1 ? (CONFIG.SCALE * CONFIG.CANVAS_WIDTH ) + 'px' : 'auto'\ncanvas.style.height = CONFIG.SCALE !== 1 ? (CONFIG.SCALE * CONFIG.CANVAS_HEIGHT) + 'px' : 'auto'\nconst context = canvas.getContext('2d')\n\nexport default class Canvas {\n\tpublic static clear(): void {\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height)\n\t}\n\n  public static drawBox(box: Box): void {\n    context.strokeStyle = box.color\n    context.lineWidth = 1\n    context.beginPath()\n      // Draw box outline\n      context.moveTo( 0.5 + box.col * CONFIG.TILE_SIZE,                     0.5 + box.row * CONFIG.TILE_SIZE)\n      context.lineTo(-0.5 + box.col * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE,  0.5 + box.row * CONFIG.TILE_SIZE)\n      context.lineTo(-0.5 + box.col * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE, -0.5 + box.row * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE)\n      context.lineTo( 0.5 + box.col * CONFIG.TILE_SIZE                   , -0.5 + box.row * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE)\n      context.lineTo( 0.5 + box.col * CONFIG.TILE_SIZE,                     0.5 + box.row * CONFIG.TILE_SIZE)\n\n      // Draw 'x' accross the box\n      context.moveTo( 0.5 + box.col * CONFIG.TILE_SIZE,                     0.5 + box.row * CONFIG.TILE_SIZE)\n      context.lineTo(-0.5 + box.col * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE, -0.5 + box.row * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE)\n      context.moveTo(-0.5 + box.col * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE,  0.5 + box.row * CONFIG.TILE_SIZE)\n      context.lineTo( 0.5 + box.col * CONFIG.TILE_SIZE,                    -0.5 + box.row * CONFIG.TILE_SIZE + CONFIG.TILE_SIZE)\n    context.stroke()\n  }\n  \n  public static drawPlayer(p: Player) {\n    context.beginPath()\n      context.fillStyle = '#00AA00'\n      context.font = \"10px Monospace\"\n\n      context.fillText(`p (${p.x}, ${p.y})`, 50, 50)\n      const canvasX: number = Mouse.x - canvas.offsetLeft\n      const canvasY: number = Mouse.y - canvas.offsetTop\n      context.fillText(`m (${canvasX}, ${canvasY})`, 50, 62)\n      const dx = canvasX - p.x\n      const dy = canvasY - p.y\n      context.fillText(`d (${dx}, ${dy})`, 50, 74)\n      const theta = Math.atan2((dy), (dx))\n      context.fillText(`θ = ${theta}`, 50, 86)\n\n      context.strokeStyle = '#523DA5'\n      context.lineWidth = 2\n      context.moveTo(p.x, p.y)\n      context.lineTo(p.x + (p.sightLineLength * Math.cos(theta)), p.y + (p.sightLineLength * Math.sin(theta)))\n    context.stroke()\n  }\n\n  public static drawCrosshair(): void {\n    const canvasX: number = Mouse.x - canvas.offsetLeft\n    const canvasY: number = Mouse.y - canvas.offsetTop\n    let offsetX, offsetY\n    context.strokeStyle = '#FFFFFF'\n    context.lineWidth = 0.5\n    context.beginPath()\n      // Top\n      offsetX =  0.5\n      offsetY = -1.5\n      context.moveTo(canvasX + offsetX, canvasY + offsetY)\n      offsetY = -3.5\n      context.lineTo(canvasX + offsetX, canvasY + offsetY)\n\n      // Bottom\n      offsetY = 2.5\n      context.moveTo(canvasX + offsetX, canvasY + offsetY)\n      offsetY = 4.5\n      context.lineTo(canvasX + offsetX, canvasY + offsetY)\n\n      // Left\n      offsetY =  0.5\n      offsetX = -3.5\n      context.moveTo(canvasX + offsetX, canvasY + offsetY)\n      offsetX = -1.5\n      context.lineTo(canvasX + offsetX, canvasY + offsetY)\n\n      // Right\n      offsetX = 2.5\n      context.moveTo(canvasX + offsetX, canvasY + offsetY)\n      offsetX = 4.5\n      context.lineTo(canvasX + offsetX, canvasY + offsetY)\n    context.stroke()\n  }\n\n  public static drawPlayerVisionRay(p: Player): void {\n    const canvasMouseX: number = Canvas.getCanvasMouseX()\n    const canvasMouseY: number = Canvas.getCanvasMouseY()\n    context.strokeStyle = '#FF4444'\n    context.lineWidth = 0.2\n    context.beginPath()\n      context.moveTo(p.x, p.y)\n      context.lineTo(canvasMouseX, canvasMouseY)\n    context.stroke()\n  }\n\n  public static drawProjectiles (projectiles: Projectile[]) {\n    context.fillStyle = '#FFFFFF'\n    context.lineWidth = 1\n    projectiles.forEach(p => {\n      // context.fillRect(p.x, p.y, 1, 1)\n      context.beginPath()\n      context.arc(p.x, p.y, 2, 0, (2 * Math.PI))\n      context.stroke()\n    })\n  }\n\n  public static getCanvasDomElement = (): HTMLCanvasElement => canvas\n  public static getCanvasMouseX = (): number => Mouse.x - canvas.offsetLeft + 0.5\n  public static getCanvasMouseY = (): number => Mouse.y - canvas.offsetTop  + 0.5\n}\n","import Canvas from '@app/infrastructure/Canvas'\nimport Player from '@app/domain/Player'\n\nexport default class Mouse {\n\tpublic static x: number = 0\n\tpublic static y: number = 0\n  public static init(player: Player) {\n    this.hijackRightClick()\n    this.trackMouseOnCanvas()\n    this.listenForLeftClicks(player)\n  }\n\n  private static hijackRightClick(): void {\n    window.addEventListener('contextmenu', e => {\n      e.preventDefault()\n    }, false)\n  }\n\n  private static trackMouseOnCanvas(): void {\n    const canvas: HTMLCanvasElement = Canvas.getCanvasDomElement()\n    canvas.addEventListener('mousemove', e => {\n\t\t\tthis.x = e.pageX\n\t\t\tthis.y = e.pageY\n    }, false)\n  }\n\n  private static listenForLeftClicks(player: Player): void {\n    const canvas: HTMLCanvasElement = Canvas.getCanvasDomElement()\n    canvas.addEventListener('mousedown', e => {\n      player.setShooting(true)\n    }, false)\n    canvas.addEventListener('mouseup', e => {\n      player.setShooting(false)\n    }, false)\n  }\n}\n","import Game from '@app/infrastructure/Game'\n\nconst game: Game = new Game()\ngame.start()\n","import Canvas from '@app/infrastructure/Canvas'\nimport Mouse from '@app/peripherals/Mouse'\nimport Keyboard from '@app/peripherals/Keyboard'\nimport Grid from '@app/domain/Grid'\nimport Map from '@app/domain/Map'\nimport Player from '@app/domain/Player'\n\nconst grid: Grid = new Grid()\nconst map: Map = new Map(grid)\nconst player: Player = new Player(100, 100)\n\nKeyboard.init(player)\nMouse.init(player)\n\nexport default class Game {\n  public start(): void {\n\t\twindow.requestAnimationFrame(() => this.gameLoop())\n  }\n\n\tprivate gameLoop(): void {\n\t\tthis.update()\n\t\tthis.render()\n\t\twindow.requestAnimationFrame(() => this.gameLoop())\n\t}\n\n  private update(): void {\n    player.update()\n  }\n\n  private render(): void {\n\t  Canvas.clear()\n    map.draw()\n    player.draw()\n  }\n}\n","import Player from '@app/domain/Player'\n\nexport default class Keyboard {\n  public static init(player: Player): void {\n    // TODO: Move Player logic to Player class\n    document.addEventListener('keydown', e => {\n      switch (e.keyCode) {\n        case 87: // w\n          player.moving.up = true\n          break\n        case 65: // a\n          player.moving.left = true\n          break\n        case 83: // s\n          player.moving.down = true\n          break\n        case 68: // d\n          player.moving.right = true\n          break\n        default:\n          break\n      }\n    })\n    document.addEventListener('keyup', e => {\n      switch (e.keyCode) {\n        case 87: // w\n          player.moving.up = false\n          break\n        case 65: // a\n          player.moving.left = false\n          break\n        case 83: // s\n          player.moving.down = false\n          break\n        case 68: // d\n          player.moving.right = false\n          break\n        default:\n          break\n      }\n    })\n  }\n}\n","import * as CONFIG from '@app/configuration/config.json'\n\nexport default class Grid {\n  rows: number = CONFIG.CANVAS_HEIGHT / CONFIG.TILE_SIZE\n  cols: number = CONFIG.CANVAS_WIDTH  / CONFIG.TILE_SIZE\n}\n","import Grid from '@app/domain/Grid'\n\nimport Canvas from '@app/infrastructure/Canvas'\nimport Box from '@app/infrastructure/objects/primitives/Box'\n\nimport * as Map01 from '@app/resources/maps/Map-01.json'\n\nexport default class Map {\n  private boxes: Box[] = []\n\n  constructor(private grid: Grid) {\n    this.loadMap(Map01)\n  }\n\n  public draw(): void {\n    this.boxes.forEach((box: Box) => {\n      Canvas.drawBox(box)\n    })\n  }\n\n  private loadMap(map: number[]): void {\n    if (this.grid.rows * this.grid.cols !== map.length) {\n      console.error(`Expected - columns: ${this.grid.cols}, rows: ${this.grid.rows}`)\n      throw new Error(`Invalid Map file: ${map}`)\n    }\n\n    let row: number, col: number\n    for (let i = 0; i < map.length; ++i) {\n      col = i % this.grid.cols\n      row = Math.floor(i / this.grid.cols)\n      switch (map[i]) {\n        case 1:\n          this.boxes.push({\n            color: '#572F17',\n            col,\n            row\n          })\n          break\n        case 2:\n          this.boxes.push({\n            color: '#403550',\n            col,\n            row\n          })\n          break\n        case 3:\n          this.boxes.push({\n            color: '#27531B',\n            col,\n            row\n          })\n          break\n      }\n    }\n  }\n}\n","import * as CONFIG from '@app/configuration/config.json'\nimport Canvas from '@app/infrastructure/Canvas'\n\nimport Projectile from '@app/domain/Projectile'\n\nexport default class Player {\n  public rotation: number = 0\n  private maxSpeed = 3\n  public moving = {\n    left  : false,\n    right : false,\n    up    : false,\n    down  : false,\n  }\n  public sightLineLength = 10\n  private shooting = false\n  private shootingCooldown = 6\n  private projectiles: Projectile[] = []\n\n  constructor(public x: number, public y: number) {}\n\n  public update(): void {\n    this.move()\n    this.shoot()\n    this.updateProjectiles()\n  }\n\n  public move(): void {\n    if (this.moving.left) {\n      this.x -= this.maxSpeed\n    }\n    if (this.moving.right) {\n      this.x += this.maxSpeed\n    }\n    if (this.moving.up) {\n      this.y -= this.maxSpeed\n    }\n    if (this.moving.down) {\n      this.y += this.maxSpeed\n    }\n  }\n\n  public shoot(): void {\n    if (this.shooting && this.shootingCooldown <= 0) {\n      const canvasMouseX: number = Canvas.getCanvasMouseX()\n      const canvasMouseY: number = Canvas.getCanvasMouseY()\n\n      const dx = (canvasMouseX - this.x)\n      const dy = (canvasMouseY - this.y)\n      let xVel = dx / ( Math.abs(dx) + Math.abs(dy) )\n      let yVel = dy / ( Math.abs(dx) + Math.abs(dy) )\n\n      // TODO: Insert accuracy skill to reduce bullet motion randomness\n      const randomFactorX = Math.random() * 0.1 - 0.05\n      const randomFactorY = Math.random() * 0.1 - 0.05\n      xVel += randomFactorX\n      yVel += randomFactorY\n      \n      this.projectiles.push(new Projectile(this.x, this.y, xVel, yVel))\n      this.shootingCooldown = 6\n    } else {\n      --this.shootingCooldown\n    }\n  }\n\n  // TODO: Move to the Projectile class\n  public updateProjectiles(): void {\n    this.projectiles.forEach((p, i) => {\n      p.x += p.directionX * p.speed\n      p.y += p.directionY * p.speed\n      if (\n        p.x < 0 || p.x > CONFIG.CANVAS_WIDTH ||\n        p.y < 0 || p.y > CONFIG.CANVAS_HEIGHT\n      )\n      {\n        this.projectiles.splice(i, 1) // Remove the projectile\n      }\n    })\n  }\n  \n  public draw(): void {\n    Canvas.drawPlayer(this)\n\t\tCanvas.drawPlayerVisionRay(this)\n\t\tCanvas.drawCrosshair()\n\t\tCanvas.drawProjectiles(this.projectiles)\n  }\n\n  public setShooting(isShooting: boolean): void {\n    this.shooting = isShooting\n  }\n}\n","export default class Projectile {\n  public speed: number = 14\n  constructor (\n    public x: number,\n    public y: number,\n    public directionX: number,\n    public directionY: number\n  ) {}\n}\n"],"sourceRoot":""}